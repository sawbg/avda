\hypertarget{main_8cpp_source}{\section{main.\+cpp}
\label{main_8cpp_source}\index{src/main.\+cpp@{src/main.\+cpp}}
}

\begin{DoxyCode}
00001 
00008 \textcolor{preprocessor}{#include <array>}
00009 \textcolor{preprocessor}{#include <cstdlib>}
00010 \textcolor{preprocessor}{#include <iostream>}
00011 \textcolor{preprocessor}{#include <map>}
00012 \textcolor{preprocessor}{#include <pthread.h>}
00013 \textcolor{preprocessor}{#include <string>}
00014 \textcolor{preprocessor}{#include <unistd.h>}
00015 
00016 \textcolor{preprocessor}{#include "\hyperlink{definitions_8hpp}{definitions.hpp}"}
00017 \textcolor{preprocessor}{#include "\hyperlink{fileio_8hpp}{fileio.hpp}"}
00018 \textcolor{preprocessor}{#include "\hyperlink{process_8hpp}{process.hpp}"}
00019 
00020 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00021 \textcolor{keyword}{using namespace }\hyperlink{namespacevaso}{vaso};
00022 
\hypertarget{main_8cpp_source_l00027}{}\hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{00027} \textcolor{keywordtype}{int} \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv) \{
00028     \textcolor{comment}{// generate name for patient's file}
00029     \textcolor{keywordtype}{string} filename = \textcolor{stringliteral}{""};\textcolor{comment}{//PatientName();}
00030 
00031     \textcolor{comment}{// TODO: Load all of patient's parameters}
00032 
00033     \textcolor{comment}{// Record doppler audio}
00034     \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32}* buffer[\hyperlink{definitions_8hpp_aa44e6143be9e89f19be973956c22e134}{REC\_COUNT}];
00035 
00036     \textcolor{keywordflow}{for}(\hyperlink{definitions_8hpp_adde6aaee8457bee49c2a92621fe22b79}{uint8} i = 0; i < \hyperlink{definitions_8hpp_aa44e6143be9e89f19be973956c22e134}{REC\_COUNT}; i++) \{
00037         buffer[i] = (\hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32}*)malloc(\hyperlink{definitions_8hpp_a1682c770d91c5d167b621a782be940d4}{SAMPLE\_COUNT} * \textcolor{keyword}{sizeof}(
      \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32}));
00038     \}
00039     
00040     \textcolor{keywordflow}{for}(\hyperlink{definitions_8hpp_adde6aaee8457bee49c2a92621fe22b79}{uint8} i = 0; i < \hyperlink{definitions_8hpp_aa44e6143be9e89f19be973956c22e134}{REC\_COUNT}; i++) \{
00041         \textcolor{comment}{// TODO: Prompt user to press ENTER to start recording}
00042 
00043         \textcolor{keywordtype}{int} retSeek = fseek(STDIN\_FILENO, 0, SEEK\_END);
00044         \textcolor{keywordtype}{int} retRead = read(STDIN\_FILENO, &buffer[i], \hyperlink{definitions_8hpp_a1682c770d91c5d167b621a782be940d4}{SAMPLE\_COUNT});
00045 
00046         \textcolor{keywordflow}{if}(retSeek != 0 || retRead < \hyperlink{definitions_8hpp_a1682c770d91c5d167b621a782be940d4}{SAMPLE\_COUNT}) \{
00047             cerr << \textcolor{stringliteral}{"An error occurred reading the doppler audio! "}
00048                 \textcolor{stringliteral}{"The program will now exit."} << endl;
00049             \textcolor{keywordflow}{return} \hyperlink{definitions_8hpp_a8fe83ac76edc595f6b98cd4a4127aed5}{ERROR};
00050         \}
00051 
00052         \textcolor{comment}{// TODO: Print message about recording stopped}
00053     \}
00054 
00055     map<Side, DataParams> results = \hyperlink{namespacevaso_a0a7aa548b31b50c92be5b08bcb1df9a0}{Process}(buffer);
00056 
00057     \textcolor{comment}{// TODO: Print results & probable diagnosis}
00058 
00059     \textcolor{comment}{// TODO: Write all results to file}
00060 \}
\end{DoxyCode}
